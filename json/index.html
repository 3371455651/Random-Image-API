<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Random Image JSON API</title>
</head>
<body>
    <pre id="jsonOutput"></pre>
    <script>
        // 函数用于获取随机图片链接并返回Promise
        function getRandomImageUrl() {
            return fetch('https://proxy.092333.xyz/https://raw.githubusercontent.com/3371455651/Random-Image-API/main/img.txt') // 使用GitHub Raw URL或其他公开访问的URL
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(text => {
                    const images = text.trim().split('\n').filter(Boolean); // 分割文本并过滤掉空行
                    const randomIndex = Math.floor(Math.random() * images.length);
                    const imageUrl = images[randomIndex];
                    return { success: true, imageUrl: imageUrl };
                })
                .catch(error => {
                    console.error('Error fetching img.txt:', error);
                    return { success: false, message: 'Unable to fetch images.' };
                });
        }

        // 当页面加载完成时，调用函数并处理Promise
        window.onload = () => {
            getRandomImageUrl().then(data => {
                // 将数据转换为JSON字符串并显示在页面上
                document.getElementById('jsonOutput').textContent = JSON.stringify(data, null, 2);
            }).catch(error => {
                // 错误处理
                document.getElementById('jsonOutput').textContent = JSON.stringify({ success: false, message: error.message }, null, 2);
            });
        };
    </script>
</body>
</html>
